type: GUITree
version: 0.4
dependencies:
  - default_theme
  - controls

class: HApplication
extend:
  # Extend the constructor to receive the options defined.
  constructor: |
    function( options ){
      this.base( options.priority, options.label );
    }
# The options are passed on to the constructor of the class, see above.
options:
  # A small priority number makes the onIdle calls more frequent,
  # a large priority number makes the onIdle colls less frequent.
  priority: 20
  label: Clock
subviews:
  - # Creates a small window to contain the clock string.
    class: HWindow
    rect: [ 10, 10, 100, 70 ]
    options:
      noResize: true
      closeButton: true
      label: Clock
    subviews:
      - # Creates a HStringView instance that displays the time.
        class: HStringView
        rect: [ 8, 8, 80, 20 ]
        extend:
          
          # The +drawSubviews+ method is called once, when the component is drawn.
          # Its extension centers the string and makes the font size larger.
          drawSubviews: |
            function(){
              this.setStyle('text-align','center');
              this.setStyle('font-size','18px');
            }
        
          # This is an utility method that pads the input with zeros, if the
          # value of num is less than 10.
          pad0: |
            function( num ){
              if ( num < 10 ) {
                return '0'+num;
              }
              return num;
            }
        
          # The +onIdle+ method is called at regular intervals defined by the 
          # priority of the HApplication instance itself (see above).
          onIdle: |
            function(){
              var
              date = new Date(),
              hour = this.pad0( date.getHours() ),
              min = this.pad0( date.getMinutes() ),
              sec = this.pad0( date.getSeconds() ),
              timeStr = hour+':'+min+':'+sec;
              
              this.setValue( timeStr );
            }