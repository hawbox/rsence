
ReloadApp=HApplication.extend({reload:function(){var _y=this._y;if((!_y)||(_y==='/')){window.location.reload(true);}
else{window.location.href=_y;}},reset_session:function(){COMM.request(HCLIENT_HELLO+'/goodbye',{method:'POST',body:('ses_key='+COMM.Session.ses_key),async:true,onSuccess:function(){window.location.reload(true);},onFailure:function(){window.location.reload(true);}});},constructor:function(_A2,_c4,_y){var _0=this;_0.base();_0._A2=_A2;_0._c4=_c4;_0._y=_y;var _R2=ELEM.windowSize()[0],_O2=ELEM.windowSize()[1],_Ya=parseInt(_R2/2,10),_4b=parseInt(_O2/2,10),_Y8=400,_29=300,_I8=_Ya-200,_H8=_4b-150;if(_I8<10){_I8=10;}
if(_H8<10){_H8=10;}
HWindow.extend({drawSubviews:function(){var _0=this,_6=_0.markupElemIds['subview'],_Sa=ELEM.make(_6),_Ga=ELEM.make(_6),_Pa=ELEM.make(_6),_Xa=_0.getThemeGfxFile('reloadapp_warning.png');_0.setStyle('font-family','Arial, sans-serif');_0.setStyle('color','#000');_0.setStyle('font-size','13px');ELEM.setCSS(_Sa,'position:absolute;left:8px;top:8px;width:48px;height:48px;background-image:url('+_Xa+');');ELEM.setCSS(_Ga,'position:absolute;left:64px;top:8px;width:300px;height:24px;line-height:24px;vertical-align:middle;text-align:center;font-weight:bold;overflow:hidden;text-overflow:ellipsis;line-wrap:nowrap;');ELEM.setHTML(_Ga,_0.app._A2);ELEM.setCSS(_Pa,'position:absolute;left:64px;top:42px;width:332px;height:186px;border-bottom:1px dotted #999;line-height:17px;vertical-align:middle;overflow:auto;');ELEM.setHTML(_Pa,_0.app._c4);HButton.extend({click:this.app.reload}).nu(HRect.nu(280,234,380,258),_0,{label:'Reload',events:{click:true}});HButton.extend({click:this.app.reset_session}).nu(HRect.nu(20,234,170,258),_0,{label:'Reset session',events:{click:true}});}}).nu(HRect.nu(_I8,_H8,_I8+_Y8,_H8+_29),_0,{label:_A2,minSize:[_Y8,_29],maxSize:[_Y8,_29],enabled:true,closeButton:true,noResize:true});COMM.Transporter.stop=true;},onIdle:function(){if(this['_Ua']){HSystem.windowFocus(this._Ua);}}});