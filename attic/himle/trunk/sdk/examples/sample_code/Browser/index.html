<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Browsing in a HWindowControl</title>

<script type="text/javascript" src="../../release/latest/js/allinone.js"></script>
<script type="text/javascript">

/* hbrowser Rich Internet Application
 * (c) 2007 Pekka Ojala
 *
 * Made with Helmi RIA Framework:
 *   http://pub.helmi.com/
 *   4.4.2007
 */


HIFrameWindow = HWindowControl.extend({
  constructor: function(_rect, _parentClass, _options) {    
    this.base(_rect, _parentClass, _options);
    
	this.iFrameRect = new HRect(this.windowView.rect);
	this.iFrameRect.offsetTo(0,0);
	this.iFrameRect.insetBy(2,2);
	
    this.iFrameView = new HView(this.iFrameRect, this.windowView);

    this.iFrameView.setStyle("background-color","pink"); 
    if( _options.dataURL) {
       var _dataURL = _options.dataURL;
    } else {
	   var _dataURL = "http://www.w3c.org/";
	}
	
    this.iFrameView.setHTML('<iframe width="100%" height="100%" src="'+_dataURL+'"></iframe>');
    
    this.prevWidth = this.rect.width;
    this.prevHeight = this.rect.height;
    
  },
  
  makeCloseButton: function(){
    var _closeButtonRect = new HRect(0,0,21,21);
    this.closeButton = new (HClickButton.extend({
      click: function(){
        this.app.die();
        window.status = 'Killed.';
      }
    }))( _closeButtonRect, this.iFrameRect.windowBar, { label: 'X' } );
  },

  
  doDrag: function(x, y) {
    this.base(x, y);
    
    if (null === this.URLElement) {
      this.URLElement = $(this.URLElementId);
    }
    
    if (this.prevWidth != this.rect.width || this.prevHeight != this.rect.height) {
      
      this.iFrameRect.setWidth(this.windowView.rect.width-4);
      this.iFrameRect.setHeight(this.windowView.rect.height-4);
      
	  this.iFrameView.drawRect();
	  
      this.prevWidth = this.rect.width;
      this.prevHeight = this.rect.height;
    }
  
  }
});



function init() {

  HThemeManager.setThemePath("../../release/latest/themes");
  HThemeManager.setTheme("helmiTheme");
  
  var x = 10;
  var y = 10;
  
  new HIFrameWindow(new HRect(x, y, x+800, y+640), new HApplication(20),
              {label:"URL Testing",
			   dataURL:"http://www.helmi.com/"
			   });

  var x = 820;
  var y = 10;
  
  new HIFrameWindow(new HRect(x, y, x+800, y+640), new HApplication(20),
              {label:"URL Testing",
			   dataURL:"http://pub.helmi.com/"
			   });

  var x = 320;
  var y = 50;

/*  
  new HIFrameWindow(new HRect(x, y, x+800, y+640), new HApplication(20),
              {label:"URL Testing",
			   dataURL:"https://mail.helmitechnologies.com/exchange/"
			   });
*/

  var x = 220;
  var y = 130;
  
  new HIFrameWindow(new HRect(x, y, x+650, y+600), new HApplication(20),
              {label:"URL Testing",
			   dataURL:"http://pub.helmi.com:8888/"
			   });

}

onloader('init();');


</script>

<style type="text/css">
body {
  color: black;
  background-color: #FF9900;
}
</style>

</head>

<body></body>
</html>

